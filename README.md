# 智能温控可调速风扇
### 技术栈（更新日期25-03-19）
* stm32f103c8t6，cubemx（版本6.8.0），Keil5，hal库
##
### 资料说明
#### 功能：	
利用DHT11、3个独立按键、旋转编码器、直流电机及其驱动实现以下三个模式的智能风扇：
* 定时模式：用户设定定时时间和转速，定时时间到后风扇停止转动
* 手动模式：用户通过旋转编码器调节风扇转速，范围为0~100，可对风扇转速进行锁定
* 自动模式：分为温度控制和湿度控制，分别根据DHT11测得的温度值和湿度值来调节转速
	
#### 原理
* 利用PWM对直流电机调速（调节PWM波形的占空比来调节转速）
* 定时模式：定时器中断
* 手动模式：利用外部中断读取旋转编码器变化值，并据此调节转速
* 自动模式：温湿度通过DHT11模块得到，再通过线性变换为转速
	
#### 接线方法
* 3个独立按键：上移键接PB13，确认键接PB12，下移键接PB14，另一端均接3.3V
* DHT11（3引脚）：VCC接3.3V，GND接地，DATA接PA1
* 旋转编码器（5引脚，不带按键功能）：VCC接3.3V，GND接地，A接PA6，B接GND，C接PA7
* 电机驱动TB6612FNG：VCC接3.3V，GND接地，VM接5V（可接ST-LINK上），AO1、AO2接电机，PWMA接PA2，AIN1接PA4，AIN2接PA5，STBY接3.3V
* 直流电机：两极分别接电机驱动TB6612FNG的AO1、AO2
* OLED显示屏（0.96寸4引脚）：VCC接3.3V，GND接地，SCK接PB8，SDA接PB9

#### 使用注意事项
* 在定时模式中，先用上下移动键选择小时、分钟、秒和转速，按下确认键后，可通过编码器旋转设定想要的时间和转速，再按下确认键即设定成功
* 在手动模式中，在旋钮可调状态下，用户可通过旋转编码器调节风扇转速，在旋钮锁定状态下，用户不可调节风扇转速
* 在自动模式中，转速等于当前的湿度值或温度值，可修改代码，来实现想要的转速

#### 实物图

![image](https://github.com/qiexingdong/SmartFan/blob/3684cd653865485699de83cb1dab06c25e9fa11f/img/2.png)
![image](https://github.com/qiexingdong/SmartFan/blob/3684cd653865485699de83cb1dab06c25e9fa11f/img/1.png)
